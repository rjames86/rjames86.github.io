<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#ff6b00" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#ff6b00" media="(prefers-color-scheme: dark)">

<link rel="me" href="https://mastodon.social/@rjames">
<meta name="fediverse:creator" content="@rjames@mastodon.social">

<meta name="author" content="Ryan M">
<meta name="description" content="Posts and writings by Ryan M">
    <link rel="alternate" title="ryanmo.co JSON Feed" type="application/json" href="feed.json" />
    <link href="http://feedpress.me/ryanmoco" type="application/rss+xml" rel="alternate" title="ryanmo.co Full RSS Feed" />

    <title>Back up Your Contacts with Pythonista - ryanmo.co</title>
    <link rel="stylesheet" href="https://ryanmo.co/theme/css/style.css">
</head>
<body>
    <!-- Fixed navigation banner -->
    <div class="nav-banner">
        <div class="nav-container">
            <h2 class="site-title"><a href="https://ryanmo.co/">ryanmo.co</a></h2>
            <nav class="nav-links">
                <a href="https://ryanmo.co/">Home</a>
                <a href="https://ryanmo.co/about">About</a>
            </nav>
        </div>
    </div>

    <header>
    </header>

    <main>
<article>
    <h1>Back up Your Contacts with Pythonista</h1>
    <div class="article-meta">
        <time datetime="2014-09-28T00:00:00-07:00">2014-09-28</time>
        by Ryan M
        in <a href="https://ryanmo.co/category/tech">Tech</a>
    </div>
    <p>While it hasn't happened in a while, I have lost or had issues with contacts in iCloud. I haven't found a reliable way to automatically back up my contacts on my Mac, but Pythonista offers a simple way to back them up.</p>


<p>Pythonista offers a great library which gives you access to your contacts on iOS. With a short script, I can back up my contacts to a folder in my Dropbox account. This will add a vCard file to my Dropbox account with the date the script was run.</p>
<p><em>Note: You'll need the Dropbox login script for this to work. Visit <a href="https://gist.github.com/omz/4034526">this</a> link to get it set up. I keep mine in a folder called "lib" in Pythonista.</em></p>
<p>You can download my Contacts Back up script <a href="https://gist.github.com/rjames86/79f857f427599f6e145c">here</a>.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">contacts</span>
<span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">console</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span> <span class="o">+=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span> <span class="s1">&#39;lib&#39;</span><span class="p">)]</span>
<span class="kn">from</span> <span class="nn">dropboxlogin</span> <span class="kn">import</span> <span class="n">get_client</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="c1"># Update this path here for the backup</span>
<span class="c1"># location in your Dropbox account.</span>
<span class="n">BACKUP_PATH</span> <span class="o">=</span> <span class="s1">&#39;/Backups/Contacts&#39;</span>

<span class="n">TODAY</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">dropbox_client</span> <span class="o">=</span> <span class="n">get_client</span><span class="p">()</span>

<span class="n">VCARD</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">person</span><span class="o">.</span><span class="n">vcard</span> <span class="k">for</span> <span class="n">person</span> <span class="ow">in</span> <span class="n">contacts</span><span class="o">.</span><span class="n">get_all_people</span><span class="p">())</span>

<span class="n">console</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="n">dropbox_client</span><span class="o">.</span><span class="n">put_file</span><span class="p">(</span><span class="n">BACKUP_PATH</span> <span class="o">+</span> <span class="s1">&#39;/contacts </span><span class="si">{}</span><span class="s1">.vcf&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">TODAY</span><span class="p">),</span> <span class="n">VCARD</span><span class="p">)</span>
<span class="nb">print</span> <span class="s1">&#39;Backup complete!&#39;</span>
</code></pre></div>

<p>If you're like me, you're going to forget to do this on a regular basis. I hadn't yet found a reason to use the IFTTT Launch Center Pro triggers, but this turned about to be a great reason to use it. I have a trigger that goes off on the first of every month that will launch the back up script.</p>
<p>If you want to get reminders to back up your contacts using IFTTT, you can use the recipe below.</p>
<p><a href="https://ifttt.com/view_embed_recipe/206885-backup-contacts-with-lcp" target = "_blank" class="embed_recipe embed_recipe-l_24" id= "embed_recipe-206885"><img src= 'https://ifttt.com/recipe_embed_img/206885' alt="IFTTT Recipe: Backup Contacts with LCP connects date-time to launch-center" width="370px" style="max-width:100%"/></a><script async type="text/javascript" src= "//ifttt.com/assets/embed_recipe.js"></script></p>
</article>
    </main>

    <footer>
        <p>&copy;  Ryan M. Powered by <a href="https://getpelican.com">Pelican</a></p>
    </footer>
</body>
</html>