{
    "author": {
        "name": "Ryan M"
    },
    "favicon": "https://ryanmo.co/images/favicon.png",
    "feed_url": "https://ryanmo.co/feeds/tag/backup.json",
    "home_page_url": "https://ryanmo.co",
    "items": [
        {
            "id": "https://ryanmo.co/2015/09/06/backup-your-email-with-getmail",
            "url": "https://ryanmo.co/2015/09/06/backup-your-email-with-getmail",
            "title": "Backup Your Email with Getmail",
            "content_html": "<p>It's always a good idea to keep backups of data you can't replace, including email. For the last few years, I've had a script that automatically backs up my Gmail account. Since switching to Fastmail, I figured I should continue doing the same thing. It turned out, it was pretty easy to set up another account.</p>\n\n\n<p>I've been meaning to write about backing up email for a few months now. With Dr. Drang's <a href=\"http://leancrew.com/all-this/2015/09/archiving-old-mail-with-formail/\">recent post</a> about archiving email using <code>formail</code>, I figured this a good enough time as ever to post my solution.</p>\n<p>To install <code>getmail</code>, you can use Homebrew, or <a href=\"http://pyropus.ca/software/getmail/documentation.html#installing\">manually</a> if you're in to that sort of thing.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">brew install getmail</span>\n</code></pre></div>\n\n<p>For the configuration files, I first created a directory in my Home folder</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">mkdir .getmail</span>\n</code></pre></div>\n\n<p>The config files for both Fastmail and Gmail are similar, but I'll include both for completeness</p>\n<h4 id=\"gmail\">Gmail</h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">[retriever]</span>\n<span class=\"na\">type</span> <span class=\"o\">=</span> <span class=\"s\">SimpleIMAPSSLRetriever</span>\n<span class=\"na\">server</span> <span class=\"o\">=</span> <span class=\"s\">imap.gmail.com</span>\n<span class=\"na\">username</span> <span class=\"o\">=</span> <span class=\"s\">&lt;username&gt;@gmail.com</span>\n<span class=\"na\">mailboxes</span> <span class=\"o\">=</span> <span class=\"s\">(&quot;[Gmail]/All Mail&quot;,) # To pull all emails</span>\n<span class=\"na\">port</span> <span class=\"o\">=</span> <span class=\"s\">993</span>\n\n<span class=\"k\">[destination]</span>\n<span class=\"na\">type</span> <span class=\"o\">=</span> <span class=\"s\">Maildir</span>\n<span class=\"na\">path</span> <span class=\"o\">=</span> <span class=\"s\">~/gmail-archive/</span>\n\n<span class=\"k\">[options]</span>\n<span class=\"c1\"># print messages about each action (verbose = 2)</span>\n<span class=\"c1\"># Other options:</span>\n<span class=\"c1\"># 0 prints only warnings and errors</span>\n<span class=\"c1\"># 1 prints messages about retrieving and deleting messages only</span>\n<span class=\"na\">verbose</span> <span class=\"o\">=</span> <span class=\"s\">2</span>\n<span class=\"na\">message_log</span> <span class=\"o\">=</span> <span class=\"s\">~/Dropbox/Scripts/logs/gmail.log</span>\n<span class=\"na\">receieved</span> <span class=\"o\">=</span> <span class=\"s\">false</span>\n<span class=\"na\">delivered_to</span> <span class=\"o\">=</span> <span class=\"s\">false</span>\n<span class=\"c1\"># dont re-read messages its already pulled down</span>\n<span class=\"na\">read_all</span> <span class=\"o\">=</span> <span class=\"s\">false</span>\n</code></pre></div>\n\n<h4 id=\"fastmail\">Fastmail</h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">[retriever]</span>\n<span class=\"na\">type</span> <span class=\"o\">=</span> <span class=\"s\">SimpleIMAPSSLRetriever</span>\n<span class=\"na\">server</span> <span class=\"o\">=</span> <span class=\"s\">mail.messagingengine.com</span>\n<span class=\"na\">username</span> <span class=\"o\">=</span> <span class=\"s\">&lt;username&gt;@fastmail.com</span>\n<span class=\"na\">mailboxes</span> <span class=\"o\">=</span> <span class=\"s\">(&quot;INBOX.Archive&quot;,)</span>\n\n<span class=\"k\">[destination]</span>\n<span class=\"na\">type</span> <span class=\"o\">=</span> <span class=\"s\">Maildir</span>\n<span class=\"na\">path</span> <span class=\"o\">=</span> <span class=\"s\">~/fastmail-archive/</span>\n\n<span class=\"k\">[options]</span>\n<span class=\"na\">verbose</span> <span class=\"o\">=</span> <span class=\"s\">2</span>\n<span class=\"na\">read_all</span> <span class=\"o\">=</span> <span class=\"s\">false</span>\n<span class=\"na\">message_log</span> <span class=\"o\">=</span> <span class=\"s\">~/Dropbox/Scripts/logs/fastmail.log</span>\n<span class=\"na\">delivered_to</span> <span class=\"o\">=</span> <span class=\"s\">false</span>\n<span class=\"na\">received</span> <span class=\"o\">=</span> <span class=\"s\">false</span>\n</code></pre></div>\n\n<p>You'll notice that I don't include the password in either config. If password is omitted from a config on Mac OS, the first time you run <code>getmail</code>, you'll be prompted to enter your password and it will then be stored securely in KeyChain. Since I'm using Maildir as my type, you'll need to create special folders, with 3 specific subfolders</p>\n<div class=\"codehilite\"><pre><span></span><code>mkdir ~/fastmail-archive\nmkdir !$/<span class=\"o\">{</span>cur,tmp,new<span class=\"o\">}</span> <span class=\"c1\"># creates 3 new folders in ~/fastmail-archive</span>\n</code></pre></div>\n\n<p>The same will need to be done for ~/gmail-archive.</p>\n<p>Once this is set up, you'll need to run the script once to enter in your password</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">/usr/local/bin/getmail -q -r ~/.getmail/getmail.gmail</span>\n</code></pre></div>\n\n<p>If I ever need to view the emails, I do the same as Dr. Drang and use <code>mutt</code>, which can also be installed with Homebrew.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">mutt -R -f ~/gmail-archive</span>\n</code></pre></div>",
            "summary": "<p>It's always a good idea to keep backups of data you can't replace, including email. For the last few years, I've had a script that automatically backs up my Gmail account. Since switching to Fastmail, I figured I should continue doing the same thing. It turned out, it was pretty easy to set up another account.</p>\n",
            "date_published": "2015-09-06T06:45:00-07:00",
            "author": {
                "name": "Ryan M",
                "url": "https://ryanmo.co/author/ryan-m.html"
            },
            "tags": [
                "automation",
                "email",
                "backup"
            ]
        }
    ],
    "title": "ryanmo.co",
    "version": "https://jsonfeed.org/version/1"
}